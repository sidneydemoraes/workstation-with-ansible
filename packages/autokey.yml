- name: Install and setup Autokey
  tags: autokey
  block:
  - name: Download Autokey installer
    get-url: 
      url: "{{ autokey_url }}"
      dest: "{{ tmp_dir }}"

  - name: Install Autokey
    become: yes
    apt: 
      deb: "{{ tmp_dir}}/{{ autokey_file }}"

  - name: Remove .deb file
    file:
      path: "{{ tmp_dir }}/{{ autokey_file }}"
      state: absent

  - name: Import configuration files
    git:
      repo: "git@gitlab.com:sidneydemoraes/autokey-config.git"
      dest: "{{ autokey_config_dest }}"
      clone: yes
