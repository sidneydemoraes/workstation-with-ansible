- name: Install Dependencies
  apt:
    name: zsh
    state: latest

- name: Clone Oh My Zsh
  gather_facts: yes
  command:
    cmd: 'git clone -c core.autocrlf=input --depth=1 https://github.com/robbyrussell/oh-my-zsh.git .oh-my-zsh'
    chdir: "{{ ansible_user_dir }}"

- name: Adjust Oh My Zsh files permissions
  become: yes
  file:
    path: "{{ ansible_user_dir }}/.oh-my-zsh"
    mode: go-w
    recurse: yes

- name: Set default shell
  become: yes
  user:
    name: "{{ ansible_user_id }}"
    shell: '/bin/zsh'

# - name: Import .zshrc file
